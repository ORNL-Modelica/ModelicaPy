<?xml version="1.0" ?>
<Simulation verbosity="debug">
	<TestInfo>
		<name>lotkaVolterraROM</name>
		<author>Scott Greenwood</author>
		<created>2022-01-11</created>
		<classesTested>FMPy-RAVEN interface</classesTested>
		<description>
		   Create a ROM of a Lotka Volterra Model through RAVEN using FMPy.
		</description>
	</TestInfo>

  
	<RunInfo>
		<JobName>ROMTraining</JobName>
		<WorkingDir>fmpy_raven</WorkingDir>
		<Sequence>runSteps,createOutput,processRuns</Sequence>
		<batchSize>2</batchSize>
	</RunInfo>


	<Steps>
		<MultiRun name="runSteps">
			<Input class="Files" type="input">referenceInput</Input>
			<Model class="Models" type="Code">testModel</Model>
			<Sampler class="Samplers" type="Grid">simpleGrid</Sampler>
			<!--<Sampler class="Samplers" type="MonteCarlo">monteCarlo</Sampler>-->
			<Output class="DataObjects" type="HistorySet">history</Output>
		</MultiRun>

		<IOStep name="createOutput">
			<Input class="DataObjects" type="HistorySet">history</Input>
			<Output class="OutStreams" type="Print">history</Output>
		</IOStep>
	</Steps>


	<Files>
		<Input name="referenceInput" type="input">../referenceInput.txt</Input>
	</Files>
	
	
	<Models>
		<Code name="testModel" subType="GenericCode">
			<executable>simulate.py</executable>
			<clargs arg="python" type="prepend" />		
			<clargs arg="" extension=".txt" type="input"/>
			<clargs arg="" extension=".csv" type="output"/>
		</Code>
	</Models>
	
	
	<DataObjects>
		<HistorySet name="history">
		  <Input>gInputs</Input>
		  <Output>gOutputs</Output>
		</HistorySet>
	</DataObjects>
	

	<Distributions>
		<Uniform name="dalpha">
			<upperBound>2</upperBound>
			<lowerBound>1</lowerBound>
		</Uniform>

		<Uniform name="dbeta">
			<upperBound>2</upperBound>
			<lowerBound>1</lowerBound>
		</Uniform>

		<Uniform name="dgamma">
			<upperBound>5</upperBound>
			<lowerBound>1</lowerBound>
		</Uniform>

		<Uniform name="ddelta">
			<upperBound>2</upperBound>
			<lowerBound>0</lowerBound>
		</Uniform>
	</Distributions>


	<Samplers>
		<MonteCarlo name="monteCarlo">
			<samplerInit>
				<limit>9</limit>
			</samplerInit>

			<variable name="alpha">
				<distribution>dalpha</distribution>
			</variable>

			<variable name="beta">
				<distribution>dbeta</distribution>
			</variable>

			<variable name="gamma">
				<distribution>dgamma</distribution>
			</variable>

			<variable name="delta">
				<distribution>ddelta</distribution>
			</variable>
		</MonteCarlo>
		
		<Grid name='simpleGrid'>
		    <constant name="x_start">10</constant>
			<constant name="y_start">5</constant>
			<constant name="output_interval">0.5</constant>

			<variable name='alpha'>
				<distribution>dalpha</distribution>
				<grid type='value' construction='equal' steps='2' >1 2</grid>
			</variable>

			<variable name='beta'>
				<distribution>dbeta</distribution>
				<grid type='CDF' construction='equal' steps='2' >0 1</grid>
			</variable>

			<!-- steps are actually nIntervals-->
			<constant name="gamma">3</constant>
			<constant name="delta">1</constant>
		</Grid>
	</Samplers>

	
	<VariableGroups>
		<Group name="gInputs" >alpha, beta, gamma, delta</Group>
		<Group name="gOutputs" >time, x, y, u</Group>
		<Group name="gOutputs_notime" dependencies="gOutputs" base="gOutputs">-time</Group>
	</VariableGroups>
	
	
	<OutStreams>
		<Print name="history">
			<type>csv</type>
			<source>history</source>
		</Print>
	</OutStreams>
</Simulation>
